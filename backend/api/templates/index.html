<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Modelo Matemático</title>
<style>
    /* --- Colores verdes --- */
    :root {
        --verde-fondo: #e8f5e9;      /* Verde muy suave de fondo */
        --verde-claro: #16af68;      /* Verde claro para secciones */
        --verde-medio: #66bb6a;      /* Verde medio para botones y títulos */
        --verde-fuerte: #2e7d32;     /* Verde oscuro para títulos principales */
        --verde-texto: #08490c;      /* Verde muy oscuro para textos */
        --verde-boton-hover: #1b5e20; /* Hover botón */
    }

    body {
        background-color: var(--verde-fondo);
        color: var(--verde-texto);
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 20px;
    }

    h1 {
        color: var(--verde-fuerte);
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    h2 {
        color: var(--verde-medio);
        margin-top: 30px;
        margin-bottom: 10px;
        border-bottom: 2px solid var(--verde-claro);
        padding-bottom: 5px;
    }

    h3 {
        color: var(--verde-claro);
        margin-top: 20px;
        margin-bottom: 5px;
    }

    form {
        background-color: #ffffffcc;
        padding: 20px;
        border-radius: 12px;
        max-width: 400px;
        margin: 0 auto 30px auto;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    input[type="number"] {
        width: 80px;
        padding: 6px;
        border-radius: 6px;
        border: 1px solid var(--verde-claro);
        margin: 5px 0 10px 0;
    }

    button {
        background-color: var(--verde-medio);
        color: #ffffff;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1em;
        transition: 0.3s all;
        margin-top: 10px;
    }

    button:hover {
        background-color: var(--verde-boton-hover);
        transform: scale(1.05);
    }

    p {
        font-size: 1.2em;
        font-weight: bold;
    }

    img {
        display: block;
        margin: 10px auto;
        border: 3px solid var(--verde-claro);
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    span {
        color: var(--verde-fuerte);
        font-weight: bold;
    }

</style>
</head>
<body>
<h1>__| Random Forest |__ </h1>

<form id="rfForm">
    <label>Porcentaje de entrenamiento (%): 
        <input type="number" id="percentage" value="70" min="1" max="100">
    </label><br>
    <label>Árbol a visualizar (1-50): 
        <input type="number" id="tree_index" value="1" min="1" max="50">
    </label><br>
    <button type="submit">Entrenar y mostrar</button>
</form>

<h2>Resultados ...</h2>
<p>F1 Score: <span id="f1"></span></p>

<h3># Gráfico del límite de decisión</h3>
<img id="decisionPlot" width="400">

<h3># Árbol seleccionado</h3>
<img id="treePlot" width="800">

<script>
document.getElementById('rfForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const percentage = document.getElementById('percentage').value;
    const tree_index = document.getElementById('tree_index').value;

    const response = await fetch(`/api/train_rf/?percentage=${percentage}&tree_index=${tree_index}`);
    const data = await response.json();

    document.getElementById('f1').innerText = data.f1_score.toFixed(3);
    document.getElementById('decisionPlot').src = 'data:image/png;base64,' + data.decision_plot;
    document.getElementById('treePlot').src = 'data:image/png;base64,' + data.tree_plot;
});
</script>
</body>
</html>
